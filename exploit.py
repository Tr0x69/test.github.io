import smtplib
import os
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
from email.mime.application import MIMEApplication
from email.mime.image import MIMEImage
from email.utils import formatdate

class EmailSender:
    def __init__(self, smtp_server, smtp_port, username, password):
        self.smtp_server = smtp_server
        self.smtp_port = smtp_port
        self.username = username
        self.password = password

        # Kết nối SMTP server và gửi email
        try:
            server = smtplib.SMTP(self.smtp_server, self.smtp_port)
            server.starttls()
            server.login(self.username, self.password)
            print("LoginLogin successfully!")
        except Exception as e:
            print(f"Error login: {str(e)}")
        finally:
            server.quit()




# Ví dụ sử dụng
if __name__ == "__main__":
    # Cấu hình email
    SMTP_SERVER = "localhost"
    SMTP_PORT = 587
    USERNAME = "test@test.com"
    PASSWORD = "testtest"  

    # Khởi tạo EmailSender
    sender = EmailSender(SMTP_SERVER, SMTP_PORT, USERNAME, PASSWORD)

    # Nội dung attachment từ các biến (chú ý: attachment content phải là bytes)
    